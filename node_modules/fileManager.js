var fs = require('fs');

var fileMgr = function(file,callbackJSON){
    var file = file;
    var cb = callbackJSON;
    fs.readFile(file,'utf8', function (err, data) {
        if (err) throw err;

        console.log(data);
        callbackJSON(cb(getObject(data)));
    });
}

var getObject = function(data){
    var reg = new RegExp('([a-zA-Z\d_\.]*)=(.*)[\n\r]*','g');
    var match = data.split(reg);
    var list = [];
    console.log(match);
    for (var i = 0; i < match.length-1; i+=3) {
        console.log("--------------------");
        console.log(match[i]+" : "+match[i+2])
        list.push({
            key : match[i],
            data: match[i+2]
        });
    }
    console.log(list)
    return {data : list};
}

module.exports = fileMgr;
